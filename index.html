<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>WIN CHALLENGE</title>
  <meta name="color-scheme" content="dark">
  <style>
    :root{
      --bg:#0b0f14; --muted:#9fb3c8; --text:#e6f0ff;
      --accent:#7c4dff; --accent2:#00e5ff; --ok1:#10b981; --ok2:#22c55e;
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{
      margin:0; font:16px/1.5 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      color:var(--text);
      background: radial-gradient(1200px 600px at 20% -10%, rgba(124,77,255,.12), transparent 60%),
                  radial-gradient(1000px 500px at 120% 20%, rgba(0,229,255,.10), transparent 60%),
                  var(--bg);
      overflow-x:hidden;
    }
    .stars{position:fixed; inset:0; pointer-events:none; z-index:0;
      background:
        radial-gradient(2px 2px at 10% 20%, #fff8, transparent 60%),
        radial-gradient(2px 2px at 30% 80%, #fff6, transparent 60%),
        radial-gradient(2px 2px at 70% 30%, #fff7, transparent 60%),
        radial-gradient(2px 2px at 90% 60%, #fff5, transparent 60%);
      animation: drift 18s linear infinite alternate; filter: blur(.3px); opacity:.6;
    }
    @keyframes drift { to { transform: translate3d(-20px,-10px,0) scale(1.02); } }

    .wrap{position:relative; z-index:1; max-width:1100px; margin:0 auto; padding:28px 18px 80px}
    header{display:flex; gap:18px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin-bottom:14px;}
    .brand{display:flex; align-items:center; gap:14px;}
    .logo{width:56px; height:56px; border-radius:16px;
      background: conic-gradient(from 220deg, var(--accent), var(--accent2), var(--accent));
      box-shadow: 0 10px 30px rgba(0,0,0,.4), 0 0 40px rgba(124,77,255,.25);
    }
    h1{margin:0; font-size:clamp(28px,5vw,44px); letter-spacing:.04em;
      background: linear-gradient(90deg, #fff, #b4c9ff, #cbbdff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 0 32px rgba(124,77,255,.25);
    }
    .tagline{margin-top:4px; color:var(--muted); font-size:14px}

    .top-right{display:flex; align-items:center; gap:10px}
    .status{font-size:12px; color:#a9c2e8}
    .status.error{color:#ffb4b4}

    .members{display:flex; gap:12px; flex-wrap:wrap}
    .chip{
      background: linear-gradient(180deg, #1a2433, #0f1520);
      border:1px solid #213047; color:#cfe2ff;
      padding:10px 14px; border-radius:999px; font-size:clamp(16px,2.8vw,22px);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03), 0 6px 20px rgba(0,0,0,.35);
    }

    .grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:16px; margin-top:18px;}

    .card{
      background: linear-gradient(180deg, #0f1723, #0b111a);
      border:1px solid #202b3d; border-radius:18px; padding:16px 14px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
    }
    .card:hover{ transform: translateY(-2px); box-shadow: 0 18px 40px rgba(0,0,0,.45); border-color:#2b3c58 }
    .card.done{
      background: linear-gradient(180deg, rgba(34,197,94,.12), rgba(16,185,129,.10)) , #0b1115;
      border-color: rgba(16,185,129,.55);
      box-shadow: 0 0 0 2px rgba(34,197,94,.25) inset, 0 18px 40px rgba(0,0,0,.45);
    }

    .game{display:flex; align-items:center; gap:12px; margin-bottom:10px;}
    .icon{width:34px; height:34px; border-radius:10px; flex:0 0 auto; display:grid; place-items:center; font-size:18px;
      background: radial-gradient(circle at 30% 30%, #fff2, transparent 60%), #151f2c; border:1px solid #28374f;}
    .card.done .icon{ background: linear-gradient(180deg, #1c2a22, #13241b); border-color:#1b4d37; }
    .title{font-weight:700; letter-spacing:.02em;}

    .row{display:flex; align-items:center; justify-content:space-between; gap:12px;}
    .check{appearance:none; width:24px; height:24px; border-radius:8px; border:2px solid #3a4a68; display:grid; place-items:center; cursor:pointer; background:#0f1825; transition:.2s;}
    .check:checked{ background: linear-gradient(180deg, var(--ok2), var(--ok1)); border-color:transparent; box-shadow: 0 0 18px rgba(16,185,129,.45); }
    .check:checked::after{ content:"‚úì"; color:#062014; font-weight:900; font-size:15px; transform: translateY(-1px); }

    .note{
      width:100%; background:#0c131d; border:1px solid #1c283b; color:#dbe8ff;
      padding:10px; border-radius:12px; resize:vertical; min-height:56px; font:inherit; margin-top:8px;
    }

    .progress{margin-top:22px; background:#0e1520; border:1px solid #233148; height:14px; border-radius:999px; overflow:hidden; position:relative;}
    .bar{height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent2)); box-shadow: 0 0 25px rgba(124,77,255,.4) inset; transition: width .35s ease;}
    .progress-label{display:flex; align-items:center; justify-content:space-between; margin-top:8px; color:var(--muted); font-size:13px;}

    .tools{ display:flex; flex-wrap:wrap; gap:10px; margin-top:18px }
    .btn{ background: linear-gradient(180deg, #1a2440, #121a2c); border:1px solid #2a3a58; color:#e8f2ff; padding:10px 14px; border-radius:12px; cursor:pointer; box-shadow: 0 10px 20px rgba(0,0,0,.3); transition:.12s; }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 28px rgba(0,0,0,.38); border-color:#3a5280 }
    .btn.small{ padding:8px 10px; font-size:13px}
    footer{margin-top:28px; color:#7f96b2; font-size:12px; text-align:center; opacity:.9}
  </style>
</head>
<body>
  <div class="stars" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>WIN CHALLENGE</h1>
          <div class="tagline">F√ºr Jan ‚Ä¢ Mailo ‚Ä¢ Michel ‚Ä¢ Nils ‚Äî und liebe Gr√º√üe an Gast <strong>Simon</strong> üëã</div>
        </div>
      </div>
      <div class="top-right">
        <div class="members">
          <span class="chip">Jan</span>
          <span class="chip">Mailo</span>
          <span class="chip">Michel</span>
          <span class="chip">Nils</span>
          <span class="chip">Gast: Simon ü§ù</span>
        </div>
        <div id="status" class="status">Speicherstatus: ‚Ä¶</div>
      </div>
    </header>

    <div class="tools">
      <button class="btn small" id="markAll">Alle abhaken</button>
      <button class="btn small" id="resetAll">Alles zur√ºcksetzen</button>
    </div>

    <div id="cards" class="grid" role="list"></div>

    <div class="progress" aria-label="Fortschritt">
      <div class="bar" id="bar"></div>
    </div>
    <div class="progress-label">
      <span>Fortschritt</span>
      <span id="pct">0%</span>
    </div>

    <footer>Speichert automatisch im Browser (localStorage). Wenn‚Äôs blockiert ist, siehst du oben eine Warnung. ‚ú®</footer>
  </div>

  <script>
    // --- CONFIG ---
    const GAMES = [
      { key:"csgo",  name:"CS GO",                 emoji:"üéØ" },
      { key:"lol",   name:"LOL ‚Äì ARAM",            emoji:"üßä" },
      { key:"rl",    name:"Rocket League",         emoji:"üöó" },
      { key:"fg",    name:"Fall Guys",             emoji:"üü£" },
      { key:"mbw",   name:"Minecraft Bedwars",     emoji:"‚õèÔ∏è" },
      { key:"brot",  name:"Brotato",               emoji:"üçû" },
      { key:"pubg",  name:"PUBG",                  emoji:"üéÆ" },
      { key:"uch",   name:"Ultimate Chicken Horse",emoji:"üêîüê¥" },
      { key:"cod",   name:"Call of Duty",          emoji:"üî•" },
    ];

    const STORAGE_KEY = "win-challenge-v2"; // gleich belassen, um bestehende Daten zu nutzen
    let storageOK = true;

    function testStorage(){
      try{
        const t = "__test__" + Math.random();
        localStorage.setItem(t, t);
        const ok = localStorage.getItem(t) === t;
        localStorage.removeItem(t);
        return ok;
      }catch(e){ return false; }
    }

    function setStatus(msg, isError=false){
      const s = document.getElementById("status");
      s.textContent = (isError ? "‚ö†Ô∏è " : "‚úì ") + msg;
      s.classList.toggle("error", isError);
    }

    storageOK = testStorage();
    if(!storageOK){
      setStatus("Speichern blockiert ‚Äì bitte Browser-Einstellungen pr√ºfen (Cookies/Storage erlauben).", true);
    } else {
      setStatus("Gespeichert aktiv");
    }

    const state = loadState();
    const cardsEl = document.getElementById("cards");

    // Karten rendern
    GAMES.forEach((g) => {
      const card = document.createElement("article");
      card.className = "card" + (state[g.key]?.done ? " done" : "");
      card.setAttribute("role","listitem");
      card.innerHTML = `
        <div class="row">
          <div class="game">
            <div class="icon" aria-hidden="true">${g.emoji}</div>
            <div class="title">${g.name}</div>
          </div>
          <input id="chk-${g.key}" class="check" type="checkbox" ${state[g.key]?.done ? "checked":""} aria-label="${g.name} erledigt">
        </div>
        <textarea id="note-${g.key}" class="note" placeholder="Was Lustiges passiert ist‚Ä¶ (optional)">${state[g.key]?.note ?? ""}</textarea>
      `;
      cardsEl.appendChild(card);

      // listeners
      const chk = card.querySelector(`#chk-${g.key}`);
      const note = card.querySelector(`#note-${g.key}`);
      chk.addEventListener("change", () => {
        ensure(g.key);
        state[g.key].done = chk.checked;
        card.classList.toggle("done", chk.checked);
        saveState();
        updateProgress();
      });
      note.addEventListener("input", () => {
        ensure(g.key);
        state[g.key].note = note.value;
        saveState();
      });
    });

    document.getElementById("markAll").addEventListener("click", () => {
      GAMES.forEach(g => { ensure(g.key); state[g.key].done = true; });
      saveState(); setChecks(); setCardStates(); updateProgress();
    });
    document.getElementById("resetAll").addEventListener("click", () => {
      if(!confirm("Wirklich alles zur√ºcksetzen?")) return;
      if(storageOK) localStorage.removeItem(STORAGE_KEY);
      Object.keys(state).forEach(k => delete state[k]);
      setChecks(); setNotes(); setCardStates(); updateProgress();
    });

    function ensure(k){ state[k] ??= {done:false, note:""} }
    function setChecks(){ GAMES.forEach(g=>{ const el = byId(`chk-${g.key}`); if(el) el.checked = !!state[g.key]?.done; }); }
    function setNotes(){ GAMES.forEach(g=>{ const el = byId(`note-${g.key}`); if(el) el.value = state[g.key]?.note ?? ""; }); }
    function setCardStates(){ GAMES.forEach(g=>{ const c = byId(`chk-${g.key}`).closest(".card"); c.classList.toggle("done", !!state[g.key]?.done); }); }
    function updateProgress(){
      const done = GAMES.filter(g => state[g.key]?.done).length;
      const pct = Math.round((done / GAMES.length) * 100);
      byId("bar").style.width = pct + "%";
      byId("pct").textContent = pct + "%";
    }
    function saveState(){
      if(!storageOK) return;
      try{
        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        setStatus("Gespeichert ‚úì");
      }catch(e){
        storageOK = false;
        setStatus("Speichern fehlgeschlagen ‚Äì evtl. blockiert.", true);
      }
    }
    function loadState(){
      if(!storageOK) return {};
      try{ return JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}"); }
      catch(e){ return {}; }
    }
    function byId(id){ return document.getElementById(id); }
    updateProgress();
  </script>
</body>
</html>
